<div class="isapre-page">
  <header class="header-view">
    <div class="container-aligned">
      <h1>Planes Vida</h1>
      <p>Compara planes con precios directos y <strong>sin costo adicional</strong></p>
    </div>
  </header>

  <section class="search-bar">
    <div class="search-grid container-aligned">
      
      <div class="box-input">
        <label>Regi√≥n</label>
        <select [(ngModel)]="filtros.region">
          <option value="" disabled selected>Selecciona</option>
          <option value="RM">Metropolitana</option>
        </select>
      </div>

      <div class="box-input">
        <label>Ingreso L√≠quido</label>
        <input type="number" [(ngModel)]="filtros.ingreso" placeholder="$ 0">
      </div>

      <div class="box-input">
        <label>Edad</label>
        <input type="number" [(ngModel)]="filtros.edad">
      </div>

      <div class="box-input">
        <label>Sexo</label>
        <select [(ngModel)]="filtros.sexo">
          <option value="Hombre">Hombre</option>
          <option value="Mujer">Mujer</option>
        </select>
      </div>

      <div class="box-input group-modal">
        <label>Asegurados</label>
        <button class="trigger" (click)="toggleModal()">
          {{ (cargas.length > 0 || tieneConyuge) ? 'Modificar asegurados' : 'Agregar asegurados' }}
        </button>

        <div class="popover-modal" *ngIf="mostrarModal">
          <div class="popover-head">
            <span>Agregar asegurados</span>
            <button (click)="mostrarModal = false">√ó</button>
          </div>

          <div class="popover-row">
            <label>Pareja/C√≥nyuge</label>
            <div class="toggle-switch">
              <input type="checkbox" id="conyuge" [(ngModel)]="tieneConyuge">
              <label for="conyuge" class="slider"></label>
            </div>
          </div>

          <div class="conyuge-details" *ngIf="tieneConyuge">
            <div class="conyuge-row-inline">
              <div class="sex-pick-full">
                <label>Sexo</label>
                <div class="radio-options">
                    <label><input type="radio" [name]="'s-conyuge'" [(ngModel)]="conyuge.sexo" value="Hombre"> Hombre</label>
                    <label><input type="radio" [name]="'s-conyuge'" [(ngModel)]="conyuge.sexo" value="Mujer"> Mujer</label>
                </div>
              </div>
              <div class="age-pick-full">
                <label>Edad*</label>
                <input type="number" [(ngModel)]="conyuge.edad" placeholder="27">
              </div>
            </div>
            
            <div class="input-full-width">
                <label>Ingreso Mensual L√≠quido*</label>
                <input type="text" [(ngModel)]="conyuge.ingreso" placeholder="$ 0">
            </div>
          </div>
          <div class="popover-row">
            <label>Cargas</label>
            <div class="stepper">
              <button (click)="decrementarCargas()">‚àí</button>
              <span>{{ cargas.length }}</span>
              <button (click)="incrementarCargas()">+</button>
            </div>
          </div>

          <div class="cargas-dynamic-list" *ngIf="cargas.length > 0">
            <div class="carga-card-item" *ngFor="let c of cargas; let i = index">
              <p>Carga {{ i + 1 }}</p>
              <div class="carga-row">
                <div class="sex-pick">
                  <label><input type="radio" [name]="'s'+i" [(ngModel)]="c.sexo" value="Hombre"> Hombre </label>
                  <label><input type="radio" [name]="'s'+i" [(ngModel)]="c.sexo" value="Mujer"> Mujer </label>
                </div>
                <div class="age-pick">
                  <label>Edad</label>
                  <input type="number" [(ngModel)]="c.edad">
                </div>
              </div>
            </div>
          </div>

          <button class="btn-main-action" (click)="buscarPlanes()">Agregar y calcular precios</button>
        </div>
      </div>

      <button class="btn-search" (click)="buscarPlanes()">Calcular precios</button>
    </div>
  </section>

  <section class="results-bar">
    <div class="container-aligned results-grid">
      
      <div class="results-count">
        <h2>{{ resultados.length }} Resultados</h2> 
      </div>

      <div class="rating-toggle">
        <label>
            <input type="checkbox" [(ngModel)]="mostrarPuntaje">
            <span class="puntaje-badge">‚úÖ ¬øQu√© es el Puntaje?</span>
        </label>
      </div>

      <div class="sort-select">
        <label>Ordenar por:</label>
        <select [(ngModel)]="ordenarPor">
          <option value="price">Mayor Puntaje</option>
          <option value="rating">Precio Menor a Mayor</option>
          <option value="coverage">Precio Mayor a Menor</option>
        </select>
      </div>
      
      <div class="currency-select">
        <label>Moneda:</label>
        <select>
            <option value="clp">Pesos</option>
            <option value="uf">UF</option>
        </select>
      </div>
      
      <div class="view-mode-toggle">
        <button 
          [class.active]="vista === 'list'" 
          (click)="cambiarVista('list')"
          aria-label="Vista de Lista"
        >
          <span>&#9776;</span>
        </button>
        <button 
          [class.active]="vista === 'grid'" 
          (click)="cambiarVista('grid')"
          aria-label="Vista de Grilla"
        >
          <span>&#9638;</span>
        </button>
      </div>

    </div>
  </section>
  
  </div>

  
  <div class="container">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <h4>Precio</h4>
    <div class="price-box">
      <span>$137.157 - $151.594</span>
      <span class="max-price">$380.000</span>
      <input type="range">
    </div>

    <h4>Cl√≠nicas y Hospitales</h4>
    <input type="text" placeholder="Cl√≠nica..." class="input">

    <label class="checkbox">
      <input type="checkbox" checked>
      Libre elecci√≥n <span class="count">51</span>
    </label>

    <label class="checkbox">
      <input type="checkbox" checked>
      Preferentes <span class="count">25</span>
    </label>
  </aside>

  <!-- RESULTADOS -->
  <main class="results">

    <div class="results-header">
      <span class="badge">830</span> Resultados
      <button class="help">¬øQu√© es el Puntaje?</button>

      <select>
        <option>Ordenar por</option>
      </select>
    </div>

    <!-- CARD -->
    <div class="card">
      <div class="card-left">
        <span class="tag">Preferente</span>

        <div class="company">
          <img src="https://via.placeholder.com/40" alt="">
          <strong>Colmena</strong>
        </div>

        <h5>MAX CENTRO PF1259076</h5>

        <div class="features">
          <span>üè• Hospitalaria 90%</span>
          <span>üöë Urgencia 70%</span>
          <span>ü©∫ Ambulatoria 70%</span>
          <span>üìÑ Tope anual 7.000 UF</span>
        </div>
      </div>

      <div class="card-center">
        <label>
          <input type="checkbox"> Comparar
        </label>
        <div class="score">
          Puntaje
          <span class="score-value">7.8</span>
          <small>de 7.8</small>
        </div>
      </div>

      <div class="card-right">
        <span class="price-label">Desde</span>
        <span class="price">$147.531</span>
        <small>/mes</small>
        <button class="btn-primary">Solicitar</button>
        <button class="btn-secondary">Ver detalle</button>
      </div>
    </div>

  </main>
</div>
<footer class="footer">
  <div class="footer-container">

    <!-- COLUMNA 1 -->
    <div class="footer-col">
      <h3 class="logo">Cotizadordigital.cl</h3>

      <ul class="contact">
        <li>üë§ Acceso Portal Clientes</li>
        <li>‚úâÔ∏è Contacto</li>
        <li>üìû +56 2 2712 7123</li>
        <li>üìû +56 2 2712 7123</li>
        <li>üìç Mons. S√≥tero Sanz #100, Of 801</li>
        <li>üì∞ Contacto para prensa</li>
      </ul>

      <div class="social">
        <a href="#">TikTok</a>
        <a href="#">Facebook</a>
        <a href="#">LinkedIn</a>
        <a href="#">Instagram</a>
        <a href="#">X</a>
      </div>
    </div>

    <!-- COLUMNA 2 -->
    <div class="footer-col">
      <h4>SEGUROS</h4>
      <ul>
        <li>Comparar Seguros de Salud</li>
        <li>Seguros Pyme</li>
        <li>Seguros de Vida</li>
      
      </ul>
    </div>

    <!-- COLUMNA 3 -->
    <div class="footer-col">
      <h4>ISAPRES</h4>
      <ul>
        <li>Comparar Isapres Online</li>
        <li>Tu Mejor Plan (beta)</li>
        <li>Comparador de Planes de Isapre</li>
        <li>Isapres de Chile</li>
        <li>Mapa de Productos Isapres</li>
      </ul>
    </div>

    <!-- COLUMNA 4 -->
    <div class="footer-col">
      <h4>M√ÅS DE QUEPLAN.CL</h4>
      <ul>
        <li>Partners y Alianzas</li>
        <li>Acerca de Cotizadordigital.cl</li>
        <li>Blog</li>
        <li>Presupuestos</li>
        <li>T√©rminos y Condiciones</li>
        <li>Cotizadordigital.cl Referidos</li>
      </ul>
    </div>

    <!-- COLUMNA 5 -->
    <div class="footer-col footer-logos">
      <h4>APOYADO POR:</h4>
      <img src="https://via.placeholder.com/90x40" alt="CORFO">
      <img src="https://via.placeholder.com/90x40" alt="Gobierno de Chile">

      <h4>REGULADO POR:</h4>
      <img src="https://via.placeholder.com/90x40" alt="CMF">
    </div>

  </div>
</footer>
